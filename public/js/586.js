"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[586],{6573:(t,e,n)=>{function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{Z:()=>s});var a=n(9669);const s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,s;return e=t,(n=[{key:"get",value:function(t){return a.get("/api/".concat(t)).then((function(t){return t})).catch((function(t){return t}))}},{key:"post",value:function(t,e){return a.post("/api/".concat(t),e).then((function(t){return t})).catch((function(t){return t}))}}])&&r(e.prototype,n),s&&r(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}())},3586:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),s=n(6573);function o(t,e,n,r,a,s,o){try{var i=t[s](o),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function i(t){o(s,r,a,i,c,"next",t)}function c(t){o(s,r,a,i,c,"throw",t)}i(void 0)}))}}const c={name:"auth.usertargets.buh",watch:{},data:function(){return{picker:"",users:[],loader:!1,selectUserId:0,target:0,marketing:0,showForm:!1,targetSaving:!1}},mounted:function(){var t=new Date,e=t.getMonth()+1;e=e<10?"0"+e:e,this.picker=t.getFullYear()+"-"+e,this.getTargets()},methods:{getTargets:function(){var t=this;return i(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loader=!0,t.showForm=!1,n=t.picker+"-01",(r=new FormData).append("role_id",4),r.append("date",n),e.next=8,s.Z.post("user-targets",r).then((function(t){return t.data})).then((function(e){t.users=e.users}));case 8:t.loader=!1;case 9:case"end":return e.stop()}}),e)})))()},assignTarget:function(t){this.showForm=!0,this.selectUserId=t},assignTargetRequest:function(){var t=this;return i(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.targetSaving=!0,n=t.picker+"-01",(r=new FormData).append("role_id",4),r.append("user_id",t.selectUserId),r.append("for_month",n),r.append("amount",t.target),r.append("marketing",t.marketing),e.next=10,s.Z.post("set-targets",r).then((function(t){return t.data}));case 10:t.targetSaving=!1,t.getTargets();case 12:case"end":return e.stop()}}),e)})))()}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-date-picker",{attrs:{"full-width":"",type:"month"},on:{change:t.getTargets},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}})],1),t._v(" "),n("v-col",{attrs:{cols:"8"}},[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n                                Name\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Target\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Marketing\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"})])]),t._v(" "),t.loader?n("tbody",t._l(10,(function(t){return n("tr",{key:t},[n("td",{staticClass:"pa-0",attrs:{colspan:"5"}},[n("v-skeleton-loader",{attrs:{type:"list-item"}})],1)])})),0):n("tbody",t._l(t.users,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.target?e.target.amount:0))]),t._v(" "),n("td",[t._v(t._s(e.target?e.target.marketing:0))]),t._v(" "),n("td",[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(r){var a=r.on,s=r.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"info",fab:"","x-small":"",dark:""},on:{click:function(n){return t.assignTarget(e.id)}}},"v-btn",s,!1),a),[n("v-icon",[t._v("mdi-target")])],1)]}}],null,!0)},[t._v(" "),n("span",[t._v("Assign/Update Target")])])],1)])})),0)]},proxy:!0}])}),t._v(" "),t.showForm?n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-divider")],1),t._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:t.users,"item-text":"name","item-value":"id",label:"User",required:""},model:{value:t.selectUserId,callback:function(e){t.selectUserId=e},expression:"selectUserId"}})],1),t._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{type:"number",step:"any",label:"Marketing Amount $"},model:{value:t.marketing,callback:function(e){t.marketing=e},expression:"marketing"}})],1),t._v(" "),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{type:"number",step:"any",label:"Input Target Amount $"},model:{value:t.target,callback:function(e){t.target=e},expression:"target"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-btn",{attrs:{loading:t.targetSaving,disabled:t.targetSaving,color:"teal",elevation:"1",large:"",raised:"",block:""},on:{click:t.assignTargetRequest}},[t._v("\n                        Assign Target\n                    ")])],1)],1):t._e()],1)],1)],1)}),[],!1,null,null,null).exports}}]);